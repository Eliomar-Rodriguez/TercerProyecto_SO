<mat-sidenav-container>
  <mat-sidenav mode="side" opened>
    <mat-toolbar>{{ userInfo.name }} (@{{ userInfo.id }})</mat-toolbar>
    <div id="usersContainer">
      <mat-nav-list>
        <span *ngFor="let user of Object.keys(users)">
          <a
            mat-list-item
            *ngIf="user != userInfo.id"
            (click)="selectUser(user)"
          >
            {{ users[user].name }} (@{{ user }})
          </a>
        </span>
      </mat-nav-list>
    </div>
    <mat-nav-list> <a mat-list-item [routerLink]="['']" style="background-color:darkgray;bottom:0;position:absolute"> Logout </a> </mat-nav-list>
  </mat-sidenav>
  <mat-sidenav-content>
    <span *ngIf="activeUser != '' && activeUser != userInfo.id">
      <mat-toolbar style="background-color:darkgrey">{{
        users[activeUser].name
      }}</mat-toolbar>
      <ng-container *ngFor="let message of chats[activeUser]">
        <mat-card
          class="msg"
          [ngStyle]="{
            'margin-left': message.id == userInfo.id ? 'auto' : '5px',
            'background-color': message.id == userInfo.id ? '#f5f5f5' : '#FFF'
          }"
        >
          {{ message.text }}
        </mat-card>
      </ng-container>

      <mat-form-field id="chatInput">
        <textarea
          style="height:100%"
          matInput
          placeholder="{{500-users[activeUser].text.length}}"
          [(ngModel)]="users[activeUser].text"
        ></textarea>
      </mat-form-field>
      <button
        mat-button
        style="margin-left: 5%; width: 10%; background-color: darkgray ; color: white"
        (click)="send()"
      >
        Enviar
      </button>
    </span>
  </mat-sidenav-content>
</mat-sidenav-container>
